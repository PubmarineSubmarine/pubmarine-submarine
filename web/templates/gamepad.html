{% extends "base.html" %}
{% block content %}
<div class="container">
    <div class="gamepad-section">        
        <div class="video-stream-container">
            <div class="video-overlay-wrapper">
                <iframe src="/cam" title="description" class="video-stream" id="video-stream" height="600"></iframe>
                
                <!-- Gamepad Overlay Elements -->
                <div class="gamepad-overlay">
                    <!-- Last Button Pressed - Top Center -->
                    <div class="overlay-button-display">
                        <div class="overlay-label">Last Button</div>
                        <div class="button-display-overlay">
                            <span id="last-button" class="button-name">None</span>
                        </div>
                    </div>
                    <div class="overlay-status-left">
                        <div id="left-status-values" class="stick-values-overlay status-values">Waiting for telemetry</div>
                    </div>
                    
                    <!-- Left Analog Stick - Bottom Left -->
                    <div class="overlay-stick-left">
                        <div class="stick-container-overlay" id="left-stick">
                            <div class="stick-indicator"></div>
                            <div class="stick-center"></div>
                        </div>
                        <div id="left-stick-values" class="stick-values-overlay">X: 0.000, Y: 0.000</div>
                    </div>
                    
                    <!-- Right Analog Stick - Bottom Right -->
                    <div class="overlay-stick-right">
`                           <div class="stick-container-overlay" id="right-stick">
                            <div class="stick-indicator"></div>
                            <div class="stick-center"></div>
                        </div>
                        <div id="right-stick-values" class="stick-values-overlay">X: 0.000, Y: 0.000</div>
                    </div>

		    <div class="overlay-trigger-left">
			<div id="left-trigger-values" class="trigger-values-overlay">LT: 0.000</div>
		    </div>

		    <div class="overlay-trigger-right">
			<div id="right-trigger-values" class="trigger-values-overlay">RT: 0.000</div>
		    </div>
                </div>
            </div>
        </div>
        
        <div id="gamepad-error" class="error-message" style="display: none;"></div>
        
        <div class="gamepad-status">
            <div class="status-item">
                <label>Controller:</label>
                <span id="connection-status" class="status-disconnected">Checking...</span>
            </div>
            <div class="status-item">
                <label>Drone:</label>
                <span id="websocket-status" class="status-disconnected">Connecting...</span>
            </div>
        </div>
        
    </div>
    <button id="testing-btn">testing</button>
    
    <!-- Controls are now overlayed on the video above -->
    
    <div class="history-section">
        <h3>Button Press History</h3>
        <div id="button-history" class="button-history">
            <div class="history-placeholder">Press gamepad buttons to see history...</div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', path='/js/gamepad.js') }}"></script>
{% endblock %}
